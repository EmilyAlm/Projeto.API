# Projeto.API

System; using System.Net.Http; using System.Net; using System.Threading.Tasks; using Newtonsoft.Json; public class Program { public staticvoid Main() { var client = new HttpClient(); client.BaseAddress = new Uri("http://demo0798384.mockable.io/"); var httpResponse = client.GetAsync("faisp").GetAwaiter().GetResult(); Console.WriteLine("Status da consulta na API: {0}\n", httpResponse.StatusCode); if(httpResponse.StatusCode != HttpStatusCode.OK) { Console.WriteLine("API indisponível. Tente novamente mais tarde"); return; } Console.WriteLine("Resultado da consulta na API\n"); Aluno[] resultado = LerRetorno(httpResponse.Content); Console.WriteLine(resultado); for(int i = 0;i < resultado.Length; i++) { Console.Write(resultado[i].nome); Console.Write(resultado[i].sobrenome); Console.Write(resultado[i].Sala); } //Nome | Sobrenome | Sala } public static Aluno[] LerRetorno(HttpContent content) { var minhaString = content.ReadAsStringAsync().GetAwaiter().GetResult(); //lemos o response da interação da API e extraímos o retorno na forma de string (texto) var arrayAlunos = JsonConvert.DeserializeObject(minhaString); return arrayAlunos; } } public class Aluno { public string Nome{get;set;} public string Sobrenome {get;set;} public int Sala {get;set;} } { nome[0] = "Jose"; nome[1] = "Ricardo"; nome[2] = "Carlos"; nome[3] = "Paulo"; nome[4] = "Maria"; nome[5] = "Sabrina"; sobrenome[0] = "Silva"; sobrenome[1] = "Alcatrão"; sobrenome[2] = "Maranhão"; sobrenome[3] = "Costa"; sobrenome[4] = "Eduarda"; sobrenome[5] = "Coelho"; Sala[0] = 112; Sala[1] = 107; Sala[2] = 107; Sala[3] = 112; Sala[4] = 115; Sala[5] = 118; }
